<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Temperature
    </ion-title>
    <ion-chip>
      <ion-label *ngIf="thermometers?.length else noThermometers">
        No. of sensors: {{ thermometers.length }}
      </ion-label>
      <ng-template #noThermometers>
        <ion-label>
          You should consider adding some data
        </ion-label>
      </ng-template>
    </ion-chip>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-refresher
    (ionRefresh)="fetchData(false, $event)"
    [disabled]="tileMove"
    slot="fixed"
  >
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div
    (dragulaModelChange)="onTileMove($event)"
    [dragula]="dragModel"
    [dragulaModel]="thermometers"
    class="grid"
  >
    <app-tile
      *ngFor="let thermometer of thermometers"
      (itemDoubleTapped)="onItemDoubleTapped(thermometer.id)"
      (itemEdited)="onItemEdit(thermometer.id)"
      (itemDeleted)="onItemDelete(thermometer.id)"
      [title]="thermometer.name"
    >
      <span
        *ngIf="thermometer.celsius !== null"
        class="temperature temperature--data"
      >
        {{ thermometer.celsius }}
        <sup>Â°C</sup>
      </span>

      <span
        *ngIf="thermometer.celsius === null"
        class="temperature temperature--no-data"
      >
        No data
      </span>

      <div
        *ngIf="selectedThermometerID === thermometer.id"
        class="loader"
      >
        <ion-progress-bar type="indeterminate"></ion-progress-bar>
      </div>
    </app-tile>
  </div>
</ion-content>
